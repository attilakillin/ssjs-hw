<%# Used templating variables: result?, fishList, error? %>
<%- include('components/header', {active: 'leaderboards'}) %>

<!-- Main content -->
<div class="container mx-auto">
    <!-- Header row -->
    <h1 class="text-3xl mb-4">Edit race</h1>

    <form method="POST">
        <!-- Main table listing the properties of a race -->
        <table class="table-fixed w-full border-collapse">
            <tr>
                <th class="border-b-4 border-indigo-50 px-4 py-4 bg-gray-700 text-indigo-50" scope="row">Race</th>
                <td class="pl-3">
                    <input class="block w-full px-4 py-3 bg-white" type="text" name="race"
                        value="<%= (typeof result !== 'undefined' && typeof result.race !== 'undefined') ? result.race : '' %>">
                </td>
            </tr>
            <tr>
                <th class="border-y-4 border-indigo-50 px-4 py-4 bg-gray-700 text-indigo-50" scope="row">Winner</th>
                <td class="pl-3"><select class="block w-full px-4 py-3 bg-white" name="winnerId">
                    <% fishList.forEach(f => { %>
                        <option <%= (typeof result !== 'undefined' && f.id === result._winner.toString()) ? 'selected' : '' %>
                                value="<%= f.id %>"><%= f.name %></option>
                    <% }); %>
                </select></td>
            </tr>
            <tr>
                <th class="border-y-4 border-indigo-50 px-4 py-4 bg-gray-700 text-indigo-50" scope="row">Time</th>
                <td class="pl-3">
                    <input class="block w-full px-4 py-3 bg-white" type="text" name="winnerTime"
                        value="<%= (typeof result !== 'undefined' && typeof result.winnerTime !== 'undefined') ? result.winnerTime : '' %>">
                </td>
            </tr>
            <tr>
                <th class="border-y-4 border-indigo-50 px-4 py-4 bg-gray-700 text-indigo-50" scope="row">Loser</th>
                <td class="pl-3"><select class="block w-full px-4 py-3 bg-white" name="loserId">
                    <% fishList.forEach(f => { %>
                        <option <%= (typeof result !== 'undefined' && f.id === result._loser.toString()) ? 'selected' : '' %>
                                value="<%= f.id %>"><%= f.name %></option>
                    <% }); %>
                </select></td>
            </tr>
            <tr>
                <th class="border-t-4 border-indigo-50 px-4 py-4 bg-gray-700 text-indigo-50" scope="row">Time</th>
                <td class="pl-3">
                    <input class="block w-full px-4 py-3 bg-white" type="text" name="loserTime"
                        value="<%= (typeof result !== 'undefined' && typeof result.loserTime !== 'undefined') ? result.loserTime : '' %>">
                </td>
            </tr>
        </table>


        <!-- 'Cancel' and 'Save' buttons below the table -->
        <div class="flex flex-row justify-end mt-4">
            <% if (typeof error !== 'undefined' && error) { %>
                <div class="px-8 py-3 text-lg text-rose-50 bg-rose-700 mr-4"><%= error %></div>
            <% } %>  
            <a href="/leaderboards" class="hover:outline hover:outline-3 hover:outline-gray-700 px-8 py-3 mr-4 text-lg">Cancel</a>
            <button type="submit" class="hover:outline hover:outline-3 hover:outline-gray-700 px-8 py-3 text-lg">Save</button>
        </div>
    </form>
</div>

<%- include('components/footer') %>
